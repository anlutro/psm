branches:
  - master

dist: bionic
sudo: false

jobs:
  - name: shellcheck
    language: shell
    script:
      - shellcheck -S warning install-psm.bash
      - shellcheck -S warning psm.sh

  - name: install-psm
    language: shell
    install: bash -x ./install-psm.bash
    script: psm help >/dev/null

  - name: test-psm
    language: shell
    addons:
      apt:
        update: true
        packages: [python3-venv, python-pip-whl]
    script:
      - ./test.sh
